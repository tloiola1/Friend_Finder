<html lang="en" data-livestyle-extension="available"><head>
	<meta charset="UTF-8">
	<title>FriendFinder</title>

	<!-- Latest compiled and minified CSS & JS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	<!-- Font Awesome Glyphicons -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

	<!-- Chosen -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>
<body>

	<div class="container">

		<h2>Survey Questions</h2>
		<hr>

		<h3><strong>About You</strong></h3>
		<h4>Name (Required)</h4>
		<input type="text" name="" id="name" class="form-control" required="">

		<h4>Link to Photo Image (Required)</h4>
		<input type="text" name="" id="photo" class="form-control" required="">

		<hr>
		<div class="row">
		<div class="col-md-4 col-sm-4 col-xs-6">
			<h3><strong>Question 1</strong></h3>
			<h4>You Love Coding.</h4>

		 	<div id="q1">
		 		<ul>
				    <li><input type="radio" id="choice1" name="q1" value="1"><label for="choice1"> 1(Strongly Disagree) </label></li>
				    <li><input type="radio" id="choice2" name="q1" value="2"><label for="choice2"> 2 </label></li>
				    <li><input type="radio" id="choice3" name="q1" value="3"><label for="choice3"> 3 </label></li>
				    <li><input type="radio" id="choice4" name="q1" value="4"><label for="choice4"> 4 </label></li>
				    <li><input type="radio" id="choice5" name="q1" value="5"><label for="choice5"> 5(Strongly Agree)</label></li>
				</ul>
			</div>
		</div>
		<div class="col-md-4 col-sm-4 col-xs-6">
			<h3><strong>Question 2</strong></h3>
			<h4>You Love Outdoors.</h4>

		 	<div id="q2">
		 		<ul>
				    <li><input type="radio" id="choice1" name="q2" value="1"><label for="choice1">1(Strongly Disagree) </label></li>
				    <li><input type="radio" id="choice2" name="q2" value="2"><label for="choice2"> 2 </label></li>
				    <li><input type="radio" id="choice3" name="q2" value="3"><label for="choice3"> 3 </label></li>
				    <li><input type="radio" id="choice4" name="q2" value="4"><label for="choice4"> 4 </label></li>
				    <li><input type="radio" id="choice5" name="q2" value="5"><label for="choice5">5(Strongly Agree)</label></li>
				</ul>
			</div>
		</div>
		<div class="col-md-4 col-sm-4 col-xs-6">
			<h3><strong>Question 3</strong></h3>
			<h4>You Love Pets.</h4>

		 	<div id="q3">
		 		<ul>
				    <li><input type="radio" id="choice1" name="q3" value="1"><label for="choice1">1(Strongly Disagree) </label></li>
				    <li><input type="radio" id="choice2" name="q3" value="2"><label for="choice2"> 2 </label></li>
				    <li><input type="radio" id="choice3" name="q3" value="3"><label for="choice3"> 3 </label></li>
				    <li><input type="radio" id="choice4" name="q3" value="4"><label for="choice4"> 4 </label></li>
				    <li><input type="radio" id="choice5" name="q3" value="5"><label for="choice5">5(Strongly Agree)</label></li>
				</ul>
			</div>
		</div>
		</div>
		<div class="col-md-4 col-sm-4 col-xs-6">
			<h3><strong>Question 4</strong></h3>
			<h4>You Love Coffee.</h4>

		 	<div id="q4">
		 		<ul>
				    <li><input type="radio" id="choice1" name="q4" value="1"><label for="choice1">1(Strongly Disagree) </label></li>
				    <li><input type="radio" id="choice2" name="q4" value="2"><label for="choice2"> 2 </label></li>
				    <li><input type="radio" id="choice3" name="q4" value="3"><label for="choice3"> 3 </label></li>
				    <li><input type="radio" id="choice4" name="q4" value="4"><label for="choice4"> 4 </label></li>
				    <li><input type="radio" id="choice5" name="q4" value="5"><label for="choice5">5(Strongly Agree)</label></li>
				</ul>
			</div>
		</div>
		<div class="col-md-4 col-sm-4 col-xs-6">
			<h3><strong>Question 5</strong></h3>
			<h4>You Love Winter.</h4>

		 	<div id="q5">
		 		<ul>
				    <li><input type="radio" id="choice1" name="q5" value="1"><label for="choice1">1(Strongly Disagree) </label></li>
				    <li><input type="radio" id="choice2" name="q5" value="2"><label for="choice2"> 2 </label></li>
				    <li><input type="radio" id="choice3" name="q5" value="3"><label for="choice3"> 3 </label></li>
				    <li><input type="radio" id="choice4" name="q5" value="4"><label for="choice4"> 4 </label></li>
				    <li><input type="radio" id="choice5" name="q5" value="5"><label for="choice5">5(Strongly Agree)</label></li>
				</ul>
			</div>
		</div>
		<div class="col-md-4 col-sm-4 col-xs-6">
			<h3><strong>Question 6</strong></h3>
			<h4>You Love Beach.</h4>

		 	<div id="q6">
		 		<ul>
				    <li><input type="radio" id="choice1" name="q6" value="1"><label for="choice1">1(Strongly Disagree) </label></li>
				    <li><input type="radio" id="choice2" name="q6" value="2"><label for="choice2"> 2 </label></li>
				    <li><input type="radio" id="choice3" name="q6" value="3"><label for="choice3"> 3 </label></li>
				    <li><input type="radio" id="choice4" name="q6" value="4"><label for="choice4"> 4 </label></li>
				    <li><input type="radio" id="choice5" name="q6" value="5"><label for="choice5">5(Strongly Agree)</label></li>
				</ul>
			</div>
		</div>
		<div class="col-md-4 col-sm-4 col-xs-6">
			<h3><strong>Question 7</strong></h3>
			<h4>You Love Node.</h4>

		 	<div id="q7">
		 		<ul>
				    <li><input type="radio" id="choice1" name="q7" value="1"><label for="choice1">1(Strongly Disagree) </label></li>
				    <li><input type="radio" id="choice2" name="q7" value="2"><label for="choice2"> 2 </label></li>
				    <li><input type="radio" id="choice3" name="q7" value="3"><label for="choice3"> 3 </label></li>
				    <li><input type="radio" id="choice4" name="q7" value="4"><label for="choice4"> 4 </label></li>
				    <li><input type="radio" id="choice5" name="q7" value="5"><label for="choice5">5(Strongly Agree)</label></li>
				</ul>
			</div>
		</div>
		<div class="col-md-4 col-sm-4 col-xs-6">
			<h3><strong>Question 8</strong></h3>
			<h4>You Love Sequelize.</h4>

		 	<div id="q8">
		 		<ul>
				    <li><input type="radio" id="choice1" name="q8" value="1"><label for="choice1">1(Strongly Disagree) </label></li>
				    <li><input type="radio" id="choice2" name="q8" value="2"><label for="choice2"> 2 </label></li>
				    <li><input type="radio" id="choice3" name="q8" value="3"><label for="choice3"> 3 </label></li>
				    <li><input type="radio" id="choice4" name="q8" value="4"><label for="choice4"> 4 </label></li>
				    <li><input type="radio" id="choice5" name="q8" value="5"><label for="choice5">5(Strongly Agree)</label></li>
				</ul>
			</div>
		</div>
		<div class="col-md-4 col-sm-4 col-xs-6">
			<h3><strong>Question 9</strong></h3>
			<h4>You Love Coding Camp.</h4>

		 	<div id="q9">
		 		<ul>
				    <li><input type="radio" id="choice1" name="q9" value="1"><label for="choice1">1(Strongly Disagree) </label></li>
				    <li><input type="radio" id="choice2" name="q9" value="2"><label for="choice2"> 2 </label></li>
				    <li><input type="radio" id="choice3" name="q9" value="3"><label for="choice3"> 3 </label></li>
				    <li><input type="radio" id="choice4" name="q9" value="4"><label for="choice4"> 4 </label></li>
				    <li><input type="radio" id="choice5" name="q9" value="5"><label for="choice5">5(Strongly Agree)</label></li>
				</ul>
			</div>
		</div>
		<div class="col-md-4 col-sm-4 col-xs-6">
			<h3><strong>Question 10</strong></h3>
			<h4>You Love Graduation Day.</h4>

		 	<div id="q10">
		 		<ul>
				    <li><input type="radio" id="choice1" name="q10" value="1"><label for="choice1">1(Strongly Disagree) </label></li>
				    <li><input type="radio" id="choice2" name="q10" value="2"><label for="choice2"> 2 </label></li>
				    <li><input type="radio" id="choice3" name="q10" value="3"><label for="choice3"> 3 </label></li>
				    <li><input type="radio" id="choice4" name="q10" value="4"><label for="choice4"> 4 </label></li>
				    <li><input type="radio" id="choice5" name="q10" value="5"><label for="choice5">5(Strongly Agree)</label></li>
				</ul>
			</div>
		</div>
		<br>
		<br>

		<!-- Submit Button -->
		<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit" data-toggle="modal" data-target="#myModal"><i class="fa fa-check-circle" aria-hidden="true"></i>Submit</button>
		<hr>
	    <footer class="footer">
	      <div class="container">
		        <p><a href="/api">API Friends List</a> | <a href="https://github.com/tloiola1/Friend_Finder" target="_blank">GitHub Repo</a></p>
	      </div>
	    </footer>

	    	<div id="myModal" class="modal fade" role="dialog">
			  <div class="modal-dialog">

			    <!-- Modal content-->
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal">&times;</button>
			        <h4 class="modal-title"></h4>
			      </div>
			      <div class="modal-body">
			        <p class="modal-body-paragraph"></p>
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			      </div>
			    </div>

			  </div>
			</div>

	</div>

  <script type="text/javascript">
  	
  	$("#submit").on("click", function(){
  		event.preventDefault();
  			var name = $('#name').val().trim();
  			var photo = $('#photo').val().trim();
	  		var scores = [$("input[name ='q1']:checked").val(), $("input[name ='q2']:checked").val(), $("input[name ='q3']:checked").val(), $("input[name ='q4']:checked").val(), $("input[name ='q5']:checked").val(), $("input[name ='q6']:checked").val(), $("input[name ='q7']:checked").val(), $("input[name ='q8']:checked").val(), $("input[name ='q9']:checked").val(), $("input[name ='q10']:checked").val()];
			// Create an object for the user's data
			var userData = {
				name,
				photo,
				scores
			};
			// AJAX post the data to the friends API. 
			$.post("/api/new", userData).done(function(data){
			//alert("Adding character...");
				matchFriends();
			});
    });

  	function matchFriends(){
	  		console.log('Match');
	        
	  		// Here we get the location of the root page.
			// We use this instead of explicitly saying the URL is localhost:3001 because the url will change when we deploy.
			var currentURL = window.location.origin;
	  		$.ajax(
  			{
  				url: currentURL + '/api', 
  				method: 'GET'
  			}).done(function(data){
  				var count = 0;
  				var search_best_match = [];
  				var match;
				var userArr = data[data.length-1].scores;
				for (var i = 0; i < data.length-1; i++) {
					for (var j = 0; j < 10; j++) {
						var temp = userArr[j] - data[i].scores[j];
						if(temp < 0){ temp = temp *(-1);}

						count += temp;
					}
						search_best_match.push(count);
				    	count = 0;
				}
				console.log(search_best_match);
				for (var i = 0; i < search_best_match.length-1; i++) {
					for (var j = 1; j < search_best_match.length; j++) {
						if(search_best_match[i] < search_best_match[j]){count = i;}
					}
				}
				
	  					$('.modal-header').append('<span>'+ data[count].name + '</span>');
	  					$('.modal-body-paragraph').append('<span>'+ data[count].photo + '</span>');	  					
  			});
  		}

  </script>


</body></html>
